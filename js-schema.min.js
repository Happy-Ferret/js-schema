(function(){var e=function(t,n){var r=e.resolve(t,n||"/"),i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=i._cached?i._cached:i();return s};e.paths=[],e.modules={},e.extensions=[".js",".coffee"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var r=e.extensions[n];if(e.modules[t+r])return t+r}}function a(t){t=t.replace(/\/+$/,"");var n=t+"/package.json";if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(e._core[t])return t;var r=e.modules.path();n=r.resolve("/",n);var i=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(s){i=e.resolve(t,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},e.define=function(t,n){var r=e._core[t]?"":e.modules.path().dirname(t),i=function(t){return e(t,r)};i.resolve=function(t){return e.resolve(t,r)},i.modules=e.modules,i.define=e.define;var s={exports:{}};e.modules[t]=function(){return e.modules[t]._cached=s.exports,n.call(s.exports,i,s,s.exports,r,t),e.modules[t]._cached=s.exports,s.exports}},typeof process=="undefined"&&(process={}),process.nextTick||(process.nextTick=function(){var e=[],t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;return t&&window.addEventListener("message",function(t){if(t.source===window&&t.data==="browserify-tick"){t.stopPropagation();if(e.length>0){var n=e.shift();n()}}},!0),function(n){t?(e.push(n),window.postMessage("browserify-tick","*")):setTimeout(n,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),process.env||(process.env={}),process.argv||(process.argv=[]),e.define("path",function(e,t,n,r,i){function s(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function o(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:process.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=u.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=u.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return u.exec(e)[3]||""}}),e.define("/js-schema/lib/schema.js",function(e,t,n,r,i){var s=e("def.js"),o=e("./linker"),u=t.exports=function(e){if(this instanceof u){if(!e.compile&&!e.validate)throw new Error("Schema definition objects must have either compile or validate function.");var t=e.compile?o.link(e.compile()):e.validate.bind(e);t.seal=function(){if(e.sealed)return t;e.sealed=!0;if(e.leafs){var n=e.leafs();if(n.certain.indexOf(u.self)!==-1)throw new Error("There's no object that satisfies this schema because of necessary recursion.");if(n.uncertain.indexOf(u.self)!==-1){if(t.assembly){var r=o.link(e.compile(),u.self);for(var i in t)r[i]=t[i];r.schema=r,t=r}u.self.set(t),u.self=new a}}return delete t.assembly,t},t.schema=t;for(var n in e)e[n]instanceof Function&&!e[n].schema&&(t[n]=e[n].bind(e));return t}return u.fromJS.apply(null,arguments).seal()},a=function(){return new u(this)};a.prototype={set:function(e){this.target||(this.target=e)},validate:function(e){return this.target(e)},generate:function(){return this.target.generate()},toJSON:function(){return{$ref:this.target.getId()}}},u.self=new a,u.fromJS=s(),u.fromJSON=s(),u.toJSON=function(e){return u(e).toJSON()},u.generate=function(e){return u(e).generate()}}),e.define("/js-schema/node_modules/def.js/package.json",function(e,t,n,r,i){t.exports={main:"./def.js"}}),e.define("/js-schema/node_modules/def.js/def.js",function(e,t,n,r,i){var s,o=function(){return this}(),u=function(t,n){var r={};r.implementation=Array.prototype.pop.call(n);if(r.implementation instanceof Function){t!==this&&(n.self=t);if(n.length||n.self)s=s||e("js-schema"),r.domain=s(n);return this.defs.unshift(r),this}throw new Error("The last arguments should be a function.")},a=function(e,t){var n;e!==o&&(t.self=e);for(var r in this.defs)if(!this.defs[r].domain||this.defs[r].domain(t)){n=this.defs[r].implementation.apply(e,t);if(n!==undefined)return n}},f=function(){var e=function(){return a.call(e,this.valueOf(),arguments)};return e.def=function(){return u.call(e,this.valueOf(),arguments)},e.defs=[],Object.defineProperty&&Object.defineProperty(e,"defs",{enumerable:!1}),arguments.length!==0&&e.def.apply(e,arguments),e};t.exports=f}),e.define("/node_modules/js-schema/package.json",function(e,t,n,r,i){t.exports={main:"./index.js"}}),e.define("/node_modules/js-schema/index.js",function(e,t,n,r,i){t.exports=e("./lib/schema"),e("./lib/patterns/reference"),e("./lib/patterns/nothing"),e("./lib/patterns/anything"),e("./lib/patterns/object"),e("./lib/patterns/or"),e("./lib/patterns/equality"),e("./lib/patterns/regexp"),e("./lib/patterns/class"),e("./lib/extensions/Boolean"),e("./lib/extensions/Number"),e("./lib/extensions/String"),e("./lib/extensions/Object"),e("./lib/extensions/Array"),e("./lib/extensions/Function")}),e.define("/node_modules/js-schema/lib/schema.js",function(e,t,n,r,i){var s=e("def.js"),o=e("./linker"),u=function(){return this}(),a=t.exports=function(e){if(this===u)return a.fromJS.apply(u,arguments);if(!e.compile&&!e.validate)throw new Error("Schemas must have either compile or validate function.");var t=e.compile?o.link(e.compile()):e.validate.bind(e);for(var n in e)e[n]instanceof Function&&(t[n]=e[n].bind(e));return t.schema=t,t};a.fromJS=s(),a.fromJSON=s(),a.toJSON=function(e){return a(e).toJSON()},a.generate=function(e){return a(e).generate()}}),e.define("/node_modules/js-schema/node_modules/def.js/package.json",function(e,t,n,r,i){t.exports={main:"./def.js"}}),e.define("/node_modules/js-schema/node_modules/def.js/def.js",function(e,t,n,r,i){var s,o=function(){return this}(),u=function(t,n){var r={};r.implementation=Array.prototype.pop.call(n);if(r.implementation instanceof Function){t!==this&&(n.self=t);if(n.length||n.self)s=s||e("js-schema"),r.domain=s(n);return this.defs.unshift(r),this}throw new Error("The last arguments should be a function.")},a=function(e,t){var n;e!==o&&(t.self=e);for(var r in this.defs)if(!this.defs[r].domain||this.defs[r].domain(t)){n=this.defs[r].implementation.apply(e,t);if(n!==undefined)return n}},f=function(){var e=function(){return a.call(e,this.valueOf(),arguments)};return e.def=function(){return u.call(e,this.valueOf(),arguments)},e.defs=[],Object.defineProperty&&Object.defineProperty(e,"defs",{enumerable:!1}),arguments.length!==0&&e.def.apply(e,arguments),e};t.exports=f}),e.define("/node_modules/js-schema/lib/linker.js",function(e,t,n,r,i){var s=[Boolean,Number,String,Object,Array,Function,Date],o=0,u=function(){return o++},a={resolve_references:function(e){var t,n,r,i,o;while(e.references.length>0){n=e.references.pop(),t=e.references.length;if(Object(n)===n)if(n.schema&&n.schema.assembly){i=n.schema.assembly;for(var a in i.references)e.references[a]=i.references[a];e.subroutines=e.subroutines.concat(i.subroutines),o=function(e,t,n,r){var s=RegExp("(\\W|^)instance(\\W|$)","g"),o=i.expression.replace(s,"$1"+r+"$2");return"("+o+")"}}else s.indexOf(n)!=-1?o=n.name+"$1":n instanceof RegExp?o=n.toString()+"$1":(r="r"+u(),e.references[r]=n,o=r+"$1");else typeof n=="string"?o='"'+n.replace('"','\\"')+'"':o=n;var f=function(e){return e.replace(RegExp("\\{"+t+"\\}((\\.validate)?\\(([^)]*)\\))?","g"),o)};e.expression=f(e.expression),e.subroutines=e.subroutines.map(f)}},link:function(e){e.subroutines=e.subroutines||[],e.references=e.references||[];var t;e.fn&&(t="f"+u(),e.subroutines.push("function "+t+"(instance){"+e.fn+"}"),e.expression=t+"(instance)"),this.resolve_references(e);var n=Object.keys(e.references),r=n.map(function(t){return e.references[t]}),i=e.subroutines.join("\n")+"\n"+"return function(instance){ return "+e.expression+"; }",s=Function.apply(null,n.concat(i)),o=s.apply(null,r);return o.assembly=e,o}};t.exports=a}),e.define("/node_modules/js-schema/lib/patterns/reference.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=function(e){return this.value=e,new s(this)};o.prototype={compile:function(){return{references:[this.value],expression:"instance === {0}"}},generate:function(){return this.value},toJSON:function(){return{"enum":[this.value]}}},s.fromJS.def(function(e){return new o(e)})}),e.define("/node_modules/js-schema/lib/patterns/nothing.js",function(e,t,n,r,i){var s=e("../schema"),o=function(){return new s(this)};o.prototype={compile:function(){return{expression:"instance == null"}},generate:function(){return null},toJSON:function(){return{disallow:"any"}}};var u=t.exports=new o;s.fromJS.def(function(e){if(e===null)return u}),s.fromJSON.def(function(e){if(e.disallow==="any")return u})}),e.define("/node_modules/js-schema/lib/patterns/anything.js",function(e,t,n,r,i){var s=e("../schema"),o=function(){return new s(this)};o.prototype={compile:function(){return{expression:"instance != null"}},generate:function(){var e=[Boolean,Number,String,Array,Object][Math.floor(Math.random()*5)];return e.schema.generate()},toJSON:function(){return{type:"any"}}};var u=t.exports=new o;s.fromJS.def(function(e){if(e===undefined)return u}),s.fromJSON.def(function(e){if(e.type==="any")return u})}),e.define("/node_modules/js-schema/lib/patterns/object.js",function(e,t,n,r,i){var s=e("../schema"),o=e("randexp"),u=e("../utils"),a=e("./anything"),f=e("./nothing"),l=t.exports=function(e,t){var n=this;return this.other=t||a,this.properties=e||[],this.stringProps={},this.regexpProps=[],this.properties.forEach(function(e){typeof e.key=="string"?n.stringProps[e.key]=e:n.regexpProps.push(e)}),new s(this)};l.prototype={compile:function(){var e=["instance != null"],t=[],n=u.referenceHandler(t),r;for(var i in this.stringProps)r="{schema}(instance[{key}])".replace("{schema}",n(this.stringProps[i].value)).replace("{key}",n(i)),this.stringProps[i].min===0&&(r="(instance[{key}] === undefined || {check})".replace("{key}",n(i)).replace("{check}",r)),e.push(r);if(!this.regexpProps.length&&this.other!==a)return{references:t,expression:e.join(" && ")};var s=Object.keys(this.stringProps),o="if (!( {checks} )) return false;".replace("{checks}",e.join(" && "));this.other!==a&&(o+="var checked;"),o+="for (var key in instance) {",this.other!==a&&(o+="checked = false;");for(var f=0;f<this.regexpProps.length;f++)this.other!==a?r="if (({regexp}.test(key) && (checked = true)) && !{schema}(instance[key])) return false;":r="if ({regexp}.test(key) && !{schema}(instance[key])) return false;",o+=r.replace("{regexp}",n(this.regexpProps[f].key)).replace("{schema}",n(this.regexpProps[f].value));return this.other!==a&&(r="if (!checked && {stringProps}.indexOf(key) === -1 && !{other}(instance[key])) return false;",o+=r.replace("{stringProps}",n(s)).replace("{other}",n(this.other))),o+="}",o+="return true;",{references:t,fn:o}},generate:function(){var e={};for(var t in this.stringProps)if(this.stringProps[t].min===1||Math.random()<.5)e[t]=this.stringProps[t].value.generate();var n,r,i;for(var s=0;s<this.regexpProps.length;s++){r=this.regexpProps[s],n=Object.keys(e).filter(function(e){return r.key.test(e)}).length,i=new o(r.key);while(n<r.min||n<r.max&&Math.random()<.5){t=i.gen();if(t in e)continue;e[t]=r.value.generate(),n+=1}}if(this.other!==f)while(Math.random()<.5)t=String.schema.generate(),t in e||(e[t]=this.other.generate());return e},toJSON:function(){var e,t,n,r={type:"object"};for(e in this.stringProps)t=this.stringProps[e],r.properties=r.properties||{},r.properties[t.key]=t.value.toJSON(),t.min===1&&(r.properties[t.key].required=!0);for(e=0;e<this.regexpProps.length;e++)t=this.regexpProps[e],r.patternProperties=r.patternProperties||{},n=t.key.toString(),n=n.substr(2,n.length-4),r.patternProperties[n]=t.value.toJSON();return this.other!==a&&(r.additionalProperties=this.other===f?!1:this.other.toJSON()),r}};var c=function(){var e="[](){}^$?*+.".split("").map(function(e){return RegExp("(\\\\)*\\"+e,"g")}),t="bBwWdDsS".split("").map(function(e){return RegExp("(\\\\)*"+e,"g")});return function(n){var r,i,s;for(r=0;r<e.length;r++){s=n.match(e[r]);if(!s)continue;for(i=0;i<s.length;i++)if(s[i].length%2===1)return RegExp("^"+n+"$")}for(r=0;r<t.length;r++){s=n.match(t[r]);if(!s)continue;for(i=0;i<s.length;i++)if(s[i].length%2===0)return RegExp("^"+n+"$")}for(r=0;r<e.length;r++)n=n.replace(e[r],function(e){return e.substr(1)});return n}}();s.fromJS.def(function(e){if(e instanceof Object){var t,n,r,i,o=[],u;for(var a in e){i=s(e[a]);if(a==="*"){u=i;continue}t=a[0],n=t==="*"||t==="?"?0:1,r=t==="*"||t==="+"?Infinity:1;if(t==="*"||t==="?"||t==="+")a=a.substr(1);a=c(a),o.push({min:n,max:r,key:a,value:i})}return new l(o,u)}return}),s.fromJSON.def(function(e){if(!e||e.type!=="object")return;var t,n=[];for(t in e.properties)n.push({min:e.properties[t].required?1:0,max:1,key:t,value:s.fromJSON(e.properties[t])});for(t in e.patternProperties)n.push({min:0,max:Infinity,key:RegExp("^"+t+"$"),value:s.fromJSON(e.properties[t])});var r;return e.additionalProperties!==undefined&&(r=e.additionalProperties===!1?s(null):s.fromJSON(e.additionalProperties)),new l(n,r)})}),e.define("/node_modules/js-schema/node_modules/randexp/package.json",function(e,t,n,r,i){t.exports={main:"./lib/randexp.js"}}),e.define("/node_modules/js-schema/node_modules/randexp/lib/randexp.js",function(e,t,n,r,i){var s=e("ret"),o=s.types,u=function(e,t){return e+Math.floor(Math.random()*(1+t-e))},a=function(e){return e+(97<=e&&e<=122?-32:65<=e&&e<=90?32:0)},f=function(e,t,n,r){return e<=n&&n<=t?{from:n,to:Math.min(t,r)}:e<=r&&r<=t?{from:Math.max(e,n),to:r}:!1},l=function(e,t){var n,r,i,s;if((r=e.length)!==t.length)return!1;for(n=0;n<r;n++){s=e[n];for(i in s)if(s.hasOwnProperty(i)&&s[i]!==t[n][i])return!1}return!0},c=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.not!==t.not&&l(i.set,t.set))return!0}return!1},h=function(e,t,n){var r,i,s=[],u=!1;for(var l=0,p=e.length;l<p;l++){r=e[l];switch(r.type){case o.CHAR:i=r.value;if(i===t||n&&a(i)===t)return!0;break;case o.RANGE:if(r.from<=t&&t<=r.to||n&&((i=f(97,122,r.from,r.to))!==!1&&i.from<=t&&t<=i.to||(i=f(65,90,r.from,r.to))!==!1&&i.from<=t&&t<=i.to))return!0;break;case o.SET:s.length>0&&c(s,r)?u=!0:s.push(r);if(!u&&!h(r.set,t,n)!=!r.not)return!0}}return!1},p=function(e,t){return String.fromCharCode(t&&Math.random()>.5?a(e):e)},d=function(e,t,n){switch(e.type){case o.ROOT:case o.GROUP:if(e.notFollowedBy)return"";if(e.remember)var r=t.push(!0)-1;var i=e.options?e.options[Math.floor(Math.random()*e.options.length)]:e.stack,s="";for(var a=0,f=i.length;a<f;a++)s+=d.call(this,i[a],t);return e.remember&&(t[r]=s),s;case o.POSITION:return"";case o.SET:var l=!n!=!e.not;if(!l)return d.call(this,e.set[Math.floor(Math.random()*e.set.length)],t,l);for(;;){var c=this.anyRandChar(),v=c.charCodeAt(0);if(h(e.set,v,this.ignoreCase))continue;return c};case o.RANGE:return p(u(e.from,e.to),this.ignoreCase);case o.REPETITION:var m=u(e.min,e.max===Infinity?e.min+this.max:e.max),s="";for(var a=0;a<m;a++)s+=d.call(this,e.value,t);return s;case o.REFERENCE:return t[e.value-1];case o.CHAR:return p(e.value,this.ignoreCase)}},v=t.exports=function(e,t){if(e instanceof RegExp)this.ignoreCase=e.ignoreCase,this.multiline=e.multiline,typeof e.max=="number"&&(this.max=e.max),typeof e.anyRandChar=="function"&&(this.anyRandChar=e.anyRandChar),e=e.source;else{if(typeof e!="string")throw new Error("Expected a regexp or string");this.ignoreCase=t&&t.indexOf("i")!==-1,this.multiline=t&&t.indexOf("m")!==-1}this.tokens=s(e)};v.prototype.max=100,v.prototype.anyRandChar=function(){return String.fromCharCode(u(0,65535))},v.prototype.gen=function(){return d.call(this,this.tokens,[])};var m=v.randexp=function(e,t){var n;return e._randexp===undefined?(n=new v(e,t),e._randexp=n):(n=e._randexp,typeof e.max=="number"&&(n.max=e.max),typeof e.anyRandChar=="function"&&(n.anyRandChar=e.anyRandChar)),n.gen()};v.sugar=function(){RegExp.prototype.gen=function(){return m(this)}}}),e.define("/node_modules/js-schema/node_modules/randexp/node_modules/ret/package.json",function(e,t,n,r,i){t.exports={main:"./lib/index.js"}}),e.define("/node_modules/js-schema/node_modules/randexp/node_modules/ret/lib/index.js",function(e,t,n,r,i){var s=e("./util"),o=e("./types"),u=e("./sets"),a=e("./positions");t.exports=function(e){var t=0,n,r,i={type:o.ROOT,stack:[]},f=i,l=i.stack,c=[],h=function(t){s.error(e,"Nothing to repeat at column "+(t-1))},p=s.strToChars(e);n=p.length;while(t<n){r=p[t++];switch(r){case"\\":r=p[t++];switch(r){case"b":l.push(a.wordBoundary());break;case"B":l.push(a.nonWordBoundary());break;case"w":l.push(u.words());break;case"W":l.push(u.notWords());break;case"d":l.push(u.ints());break;case"D":l.push(u.notInts());break;case"s":l.push(u.whitespace());break;case"S":l.push(u.notWhitespace());break;default:/\d/.test(r)?l.push({type:o.REFERENCE,value:parseInt(r)}):l.push({type:o.CHAR,value:r.charCodeAt(0)})}break;case"^":l.push(a.begin());break;case"$":l.push(a.end());break;case"[":if(p[t]==="^"){var d=!0;t++}else var d=!1;var v=s.tokenizeClass(p.slice(t),e);t+=v[1],l.push({type:o.SET,set:v[0],not:d});break;case".":l.push(u.anyChar());break;case"(":var m={type:o.GROUP,stack:[],remember:!0};r=p[t],r==="?"&&(r=p[t+1],t+=2,r==="="?m.followedBy=!0:r==="!"?m.notFollowedBy=!0:r!==":"&&s.error(e,"Invalid character '"+r+"' after '?' at column "+(t-1)),m.remember=!1),l.push(m),c.push(f),f=m,l=m.stack;break;case")":c.length===0&&s.error(e,"Unmatched ) at column "+(t-1)),f=c.pop(),l=f.options?f.options[f.options.length-1]:f.stack;break;case"|":f.options||(f.options=[f.stack],delete f.stack);var g=[];f.options.push(g),l=g;break;case"{":var y=/^(\d+)(,(\d+)?)?\}/.exec(p.slice(t)),b,w;y!==null?(b=parseInt(y[1]),w=y[2]?y[3]?parseInt(y[3]):Infinity:b,t+=y[0].length,l.push({type:o.REPETITION,min:b,max:w,value:l.pop()})):l.push({type:o.CHAR,value:123});break;case"?":l.length===0&&h(t),l.push({type:o.REPETITION,min:0,max:1,value:l.pop()});break;case"+":l.length===0&&h(t),l.push({type:o.REPETITION,min:1,max:Infinity,value:l.pop()});break;case"*":l.length===0&&h(t),l.push({type:o.REPETITION,min:0,max:Infinity,value:l.pop()});break;default:l.push({type:o.CHAR,value:r.charCodeAt(0)})}}return i},t.exports.types=o}),e.define("/node_modules/js-schema/node_modules/randexp/node_modules/ret/lib/util.js",function(e,t,n,r,i){var s=e("./types"),o=e("./sets"),u="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",a={0:0,t:9,n:10,v:11,f:12,r:13},f=t.exports={strToChars:function(e){var t=/(\[\\b\])|\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z\[\\\]\^?])|([0tnvfr]))/g,e=e.replace(t,function(e,t,n,r,i,s,o){var f=t?8:n?parseInt(n,16):r?parseInt(r,16):i?parseInt(i,8):s?u.indexOf(s):o?a[o]:undefined,l=String.fromCharCode(f);return/[\[\]{}\^$.|?*+()]/.test(l)&&(l="\\"+l),l});return e},tokenizeClass:function(e,t){var n=[],r=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?(.)/g,i,u;while((i=r.exec(e))!=null)if(i[1])n.push(o.words());else if(i[2])n.push(o.ints());else if(i[3])n.push(o.whitespace());else if(i[4])n.push(o.notWords());else if(i[5])n.push(o.notInts());else if(i[6])n.push(o.notWhitespace());else if(i[7])n.push({type:s.RANGE,from:(i[8]||i[9]).charCodeAt(0),to:i[10].charCodeAt(0)});else{if(!(u=i[12]))return[n,r.lastIndex];n.push({type:s.CHAR,value:u.charCodeAt(0)})}f.error(t,"Missing ']'")},error:function(e,t){throw new Error("Invalid regular expression: /"+e+"/: "+t)}}}),e.define("/node_modules/js-schema/node_modules/randexp/node_modules/ret/lib/types.js",function(e,t,n,r,i){t.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}}),e.define("/node_modules/js-schema/node_modules/randexp/node_modules/ret/lib/sets.js",function(e,t,n,r,i){var s=e("./types"),o=function(){return[{type:s.RANGE,from:48,to:57}]},u=function(){return[{type:s.RANGE,from:97,to:122},{type:s.RANGE,from:65,to:90}].concat(o())},a=function(){return[{type:s.CHAR,value:12},{type:s.CHAR,value:10},{type:s.CHAR,value:13},{type:s.CHAR,value:9},{type:s.CHAR,value:11},{type:s.CHAR,value:160},{type:s.CHAR,value:5760},{type:s.CHAR,value:6158},{type:s.CHAR,value:8192},{type:s.CHAR,value:8193},{type:s.CHAR,value:8194},{type:s.CHAR,value:8195},{type:s.CHAR,value:8196},{type:s.CHAR,value:8197},{type:s.CHAR,value:8198},{type:s.CHAR,value:8199},{type:s.CHAR,value:8200},{type:s.CHAR,value:8201},{type:s.CHAR,value:8202},{type:s.CHAR,value:8232},{type:s.CHAR,value:8233},{type:s.CHAR,value:8239},{type:s.CHAR,value:8287},{type:s.CHAR,value:12288}]};n.words=function(){return{type:s.SET,set:u()}},n.notWords=function(){return{type:s.SET,set:u(),not:!0}},n.ints=function(){return{type:s.SET,set:o()}},n.notInts=function(){return{type:s.SET,set:o(),not:!0}},n.whitespace=function(){return{type:s.SET,set:a()}},n.notWhitespace=function(){return{type:s.SET,set:a(),not:!0}},n.anyChar=function(){return{type:s.SET,set:[{type:s.CHAR,value:10}],not:!0}}}),e.define("/node_modules/js-schema/node_modules/randexp/node_modules/ret/lib/positions.js",function(e,t,n,r,i){var s=e("./types");n.wordBoundary=function(){return{type:s.POSITION,value:"b"}},n.nonWordBoundary=function(){return{type:s.POSITION,value:"B"}},n.begin=function(){return{type:s.POSITION,value:"^"}},n.end=function(){return{type:s.POSITION,value:"$"}}}),e.define("/node_modules/js-schema/lib/utils.js",function(e,t,n,r,i){t.exports={referenceHandler:function(e){return function(t){var n=e.indexOf(t);return"{"+(n===-1?e.push(t)-1:n)+"}"}}}}),e.define("/node_modules/js-schema/lib/patterns/or.js",function(e,t,n,r,i){var s=e("../schema"),o=e("../patterns/equality"),u=t.exports=function(e){return this.schemas=e,new s(this)};u.prototype={compile:function(){var e={references:this.schemas.slice()},t=this.schemas.map(function(e,t){return"{"+t+"}(instance)"});return e.expression=t.join(" || "),e},generate:function(){return this.schemas[Math.floor(Math.random()*this.schemas.length)].generate()},toJSON:function(){var e=this.schemas.map(s.toJSON),t=!0;for(var n=0;n<e.length;n++)if(!(e[n]["enum"]instanceof Array&&e[n]["enum"].length===1)){t=!1;break}return t?{"enum":e.map(function(e){return e["enum"][0]})}:{type:e.map(function(e){var t=typeof e.type=="string"&&Object.keys(e).length===1;return t?e.type:e})}}},s.fromJS.def(function(e){if(e instanceof Array)return new u(e.map(s.fromJS))}),s.fromJSON.def(function(e){if(!e)return;if(e["enum"]instanceof Array)return new u(e["enum"].map(function(e){return new o(e)}));if(e.type instanceof Array)return new u(e.type.map(function(e){return s.fromJSON(typeof e=="string"?{type:e}:e)}))})}),e.define("/node_modules/js-schema/lib/patterns/equality.js",function(e,t,n,r,i){var s=e("../schema"),o=function(e,t){if(Object(e)!==e||Object(t)!==t)return e===t;if(e instanceof Array&&!(t instanceof Array)||!(e instanceof Array)&&t instanceof Array)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!o(e[n],t[n]))return!1;return!0},u=t.exports=function(e){return this.object=e,new s(this)};u.prototype={validate:function(e){return o(e,this.object)},toJSON:function(){return{"enum":[this.object]}}},s.fromJS.def(function(e){if(e instanceof Array&&e.length===1)return new u(e[0])})}),e.define("/node_modules/js-schema/lib/patterns/regexp.js",function(e,t,n,r,i){var s=e("../schema"),o=e("randexp"),u=new o(/[a-zA-Z0-9]*/),a=t.exports=function(e){return this.regexp=e,this.randexp=this.regexp?new o(this.regexp):u,new s(this)};a.prototype={compile:function(){return{references:[this.regexp],expression:"Object(instance) instanceof String"+(this.regexp?" && {0}.test(instance)":"")}},generate:function(){return this.randexp.gen()},toJSON:function(){var e={type:"string"};return this.regexp&&(console.log(this.regexp.toString()),e.pattern=this.regexp.toString(),e.pattern=e.pattern.substr(1,e.pattern.length-2)),e}},s.fromJSON.def(function(e){if(!e||e.type!=="string")return;return"pattern"in e?new a(RegExp("^"+e.pattern+"$")):"minLength"in e||"maxLength"in e?new a(RegExp("^.{"+(e.minLength||0)+","+(e.maxLength||"")+"}$")):new a}),s.fromJS.def(function(e){if(e instanceof RegExp)return new a(e)})}),e.define("/node_modules/js-schema/lib/patterns/class.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=function(e){return this.constructor=e,new s(this)};o.prototype={compile:function(){return{references:[this.constructor],expression:"instance instanceof {0}"}},generate:function(){var e=function(){};return e.prototype=this.constructor.prototype,new e}},s.fromJS.def(function(e){if(e instanceof Function)return e.schema instanceof Function?e.schema:new o(e);return})}),e.define("/node_modules/js-schema/lib/extensions/Boolean.js",function(e,t,n,r,i){var s=e("../schema"),o=function(){return new s(this)};o.prototype={compile:function(){return{expression:"Object(instance) instanceof Boolean"}},generate:function(){return Math.random()<.5},toJSON:function(){return{type:"boolean"}}};var u=new o;s.fromJSON.def(function(e){if(!e||e.type!=="boolean")return;return u}),Boolean.schema=u}),e.define("/node_modules/js-schema/lib/extensions/Number.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=function(e,t,n,r,i){return this.minimum=e,this.exclusiveMinimum=t,this.maximum=n,this.exclusiveMaximum=r,this.divisibleBy=i,new s(this)};o.prototype={compile:function(){var e=[this.minimum,this.maximum,this.divisibleBy],t=["Object(instance) instanceof Number"];return this.minimum!==undefined&&this.minimum!==-Infinity&&t.push("instance "+(this.exclusiveMinimum?">":">=")+" {0}"),this.maximum!==undefined&&this.maximum!==Infinity&&t.push("instance "+(this.exclusiveMaximum?"<":"<=")+" {1}"),this.divisibleBy!==undefined&&this.divisibleBy!==0&&t.push("instance % {2} === 0"),{references:e,expression:t.join(" && ")}},min:function(e){return new o(e,!1,this.maximum,this.exclusiveMaximum,this.divisibleBy)},above:function(e){return new o(e,!0,this.maximum,this.exclusiveMaximum,this.divisibleBy)},max:function(e){return new o(this.minimum,this.exclusiveMinimum,e,!1,this.divisibleBy)},below:function(e){return new o(this.minimum,this.exclusiveMinimum,e,!0,this.divisibleBy)},step:function(e){return new o(this.minimum,this.exclusiveMinimum,this.maximum,this.exclusiveMaximum,e)},generate:function(){var e,t,n=this.minimum,r=this.maximum,i=this.divisibleBy;if(n==null||n===-Infinity)r==null||r===Infinity?(n=0,r=10):n=r>0?0:r*2;else if(r==null||r===Infinity)r=this.min<0?0:this.min*2;if(i==null||i===0){e=r-n;do t=n+Math.random()*e;while(this.exclusiveMinimum&&t===n||this.exclusiveMaximum&&t===r)}else{n=Math.ceil(n/i)*i,r=Math.floor(r/i)*i,this.exclusiveMinimum&&n===this.minimum&&(n+=i),this.exclusiveMaximum&&r===this.maximum&&(r-=i);if(n>r)return undefined;e=Math.round((r-n)/i)+1,t=n+i*Math.floor(Math.random()*e)}return t},toJSON:function(){var e=this.divisibleBy!==0&&this.divisibleBy===Math.floor(this.divisibleBy),t={type:e?"integer":"number"};this.minimum!==undefined&&(t.minimum=this.minimum,this.exclusiveMinimum===!0&&(t.exclusiveMinimum=!0)),this.maximum!==undefined&&(t.maximum=this.maximum,this.exclusiveMaximum===!0&&(t.exclusiveMaximum=!0));var n=this.divisibleBy;return n!==undefined&&n!==0&&n!==1&&(t.divisibleBy=n),t}},s.fromJSON.def(function(e){if(!e||e.type!=="number"&&e.type!=="integer")return;return new o(e.minimum,e.exclusiveMinimum,e.maximum,e.exclusiveMaximum,e.divisibleBy||(e.type==="integer"?1:0))}),Number.schema=new o,Number.min=Number.schema.min,Number.above=Number.schema.above,Number.max=Number.schema.max,Number.below=Number.schema.below,Number.step=Number.schema.step,Number.Integer=Number.step(1)}),e.define("/node_modules/js-schema/lib/extensions/String.js",function(e,t,n,r,i){var s=e("../patterns/regexp");String.of=function(){var e=Array.prototype.reverse.call(arguments),t=e[0]?"["+e[0]+"]":"[a-zA-Z0-9]",n=e[1],r=e.length>2?e[2]:e[1],i="^"+t+"{"+(r||0)+","+(n||"")+"}$";return new s(RegExp(i))},String.schema=new s}),e.define("/node_modules/js-schema/lib/extensions/Object.js",function(e,t,n,r,i){var s=e("../patterns/reference"),o=e("../patterns/equality"),u=e("../patterns/object");Object.like=function(e){return new o(e)},Object.reference=function(e){return new s(e)},Object.schema=new u}),e.define("/node_modules/js-schema/lib/extensions/Array.js",function(e,t,n,r,i){var s=e("../schema"),o=e("../patterns/equality"),u=e("../patterns/anything"),a=t.exports=function(e,t,n){return this.itemSchema=e||u,this.min=n||0,this.max=t||Infinity,new s(this)};a.prototype={compile:function(){var e={};e.fn="if (!(instance instanceof Array)) return false;";if(this.min>0||this.max<Infinity){var t=[];this.min===this.max?t.push("instance.length !== "+this.min):(this.min>0&&t.push("instance.length < "+this.min),this.max<Infinity&&t.push("instance.length > "+this.max)),e.fn+="if ("+t.join(" || ")+") return false;"}return this.itemSchema!==u&&(e.references=[this.itemSchema],e.fn+="for (var i = 0; i < instance.length; i++) {  if (!{0}(instance[i])) return false;}"),e.fn+="return true;",e},generate:function(){var e=[];while(e.length<this.min||e.length<this.max&&Math.random()<.666)e.push(this.itemSchema.generate());return e},toJSON:function(){var e={type:"array"};return this.min>0&&(e.minItems=this.min),this.max<Infinity&&(e.maxItems=this.max),this.itemSchema!==u&&(e.items=this.itemSchema.toJSON()),e}},s.fromJSON.def(function(e){if(!e||e.type!=="array")return;if(e.items instanceof Array)return;return new a(s.fromJSON(e.items),e.maxItems,e.minItems)}),Array.of=function(){var e=Array.prototype.reverse.call(arguments);return e.length===2&&(e[2]=e[1]),new a(s(e[0]),e[1],e[2])},Array.like=function(e){return new o(e)},Array.schema=new a}),e.define("/node_modules/js-schema/lib/extensions/Function.js",function(e,t,n,r,i){var s=e("../patterns/reference"),o=e("../patterns/class");Function.schema=new o(Function),Function.schema.generate=function(){return function(){}},Function.reference=function(e){return new s(e)}}),e.define("/js-schema/lib/linker.js",function(e,t,n,r,i){var s=[Boolean,Number,String,Object,Array,Function,Date],o=RegExp("(\\W|^)instance(\\W|$)","g"),u=0,a=function(){return u++},f=function(e,t,n){var r=function(e){return e.replace(t,n)};e.expression=r(e.expression),e.subroutines=e.subroutines.map(r)},l={resolve_references:function(e){var t,n,r,i,u;while(e.references.length>0){n=e.references.pop(),t=e.references.length;if(Object(n)===n)if(n.schema&&n.schema.assembly){i=n.schema.assembly;for(var l in i.references)e.references[l]=i.references[l];e.subroutines=e.subroutines.concat(i.subroutines),u=function(e,t,n,r){var s=i.expression.replace(o,"$1"+r+"$2");return"("+s+")"}}else s.indexOf(n)!=-1?u=n.name+"$1":n instanceof RegExp?u=n.toString()+"$1":(r="r"+a(),e.references[r]=n,u=r+"$1");else typeof n=="string"?u='"'+n.replace('"','\\"')+'"':u=n;f(e,RegExp("\\{"+t+"\\}((\\.validate)?\\(([^)]*)\\))?","g"),u)}},link:function(e,t){e.subroutines=e.subroutines||[],e.references=e.references||[];var n;e.fn&&(n="f"+a(),e.subroutines.push("function "+n+"(instance){"+e.fn+"}"),e.expression=n+"(instance)",delete e.fn),this.resolve_references(e);
if(t)for(var r in e.references){if(e.references[r]!==t)continue;delete e.references[r],f(e,RegExp(r+"\\(","g"),"self(")}var i=Object.keys(e.references),s=i.map(function(t){return e.references[t]}),o=e.subroutines.join("\n")+"\n";o+=e.fn?"var self = "+n+";\n":"function self(instance){ return "+e.expression+"; }\n",o+="return self;";var u=Function.apply(null,i.concat(o)),l=u.apply(null,s);return l.assembly=e,l}};t.exports=l}),e.define("/js-schema/lib/patterns/reference.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=function(e){return this.value=e,new s(this)};o.prototype={compile:function(){return{references:[this.value],expression:"instance === {0}"}},generate:function(){return this.value},toJSON:function(){return{"enum":[this.value]}}},s.fromJS.def(function(e){return new o(e)})}),e.define("/js-schema/lib/patterns/nothing.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=new s({compile:function(){return{expression:"instance == null"}},generate:function(){return Math.random()<.5?null:undefined},toJSON:function(){return{type:"null"}}});s.fromJS.def(function(e){if(e===null)return o}),s.fromJSON.def(function(e){if(e.type==="null")return o})}),e.define("/js-schema/lib/patterns/anything.js",function(e,t,n,r,i){var s=e("../schema"),o=e("./nothing"),u=t.exports=new s({compile:function(){return{expression:"instance != null"}},generate:function(){var e=[o,Boolean,Number,String,Array,Object][Math.floor(Math.random()*6)];return e.schema.generate()},toJSON:function(){return{type:"any"}}});s.fromJS.def(function(e){if(e===undefined)return u}),s.fromJSON.def(function(e){if(e.type==="any")return u})}),e.define("/js-schema/lib/patterns/object.js",function(e,t,n,r,i){var s=e("../schema"),o=e("randexp"),u=e("../utils"),a=e("./anything"),f=e("./nothing"),l=e("underscore"),c=t.exports=function(e,t){var n=this;return this.other=t||a,this.properties=e||[],this.stringProps={},this.regexpProps=[],this.properties.forEach(function(e){typeof e.key=="string"?n.stringProps[e.key]=e:n.regexpProps.push(e)}),new s(this)};c.prototype={compile:function(){var e=["instance != null"],t=[],n=u.referenceHandler(t),r;for(var i in this.stringProps)r="{schema}(instance[{key}])".replace("{schema}",n(this.stringProps[i].value)).replace("{key}",n(i)),this.stringProps[i].min===0&&(r="(instance[{key}] === undefined || {check})".replace("{key}",n(i)).replace("{check}",r)),e.push(r);if(!this.regexpProps.length&&this.other===a)return{references:t,expression:e.join(" && ")};var s=Object.keys(this.stringProps),o="if (!( {checks} )) return false;".replace("{checks}",e.join(" && "));this.other!==a&&(o+="var checked;"),o+="for (var key in instance) {",this.other!==a&&(o+="checked = false;");for(var f=0;f<this.regexpProps.length;f++)this.other!==a?r="if (({regexp}.test(key) && (checked = true)) && !{schema}(instance[key])) return false;":r="if ({regexp}.test(key) && !{schema}(instance[key])) return false;",o+=r.replace("{regexp}",n(this.regexpProps[f].key)).replace("{schema}",n(this.regexpProps[f].value));return this.other!==a&&(r="if (!checked && {stringProps}.indexOf(key) === -1 && !{other}(instance[key])) return false;",o+=r.replace("{stringProps}",n(s)).replace("{other}",n(this.other))),o+="}",o+="return true;",{references:t,fn:o}},generate:function(){var e={};for(var t in this.stringProps)if(this.stringProps[t].min===1||Math.random()<.5)e[t]=this.stringProps[t].value.generate();var n,r,i;for(var s=0;s<this.regexpProps.length;s++){r=this.regexpProps[s],n=Object.keys(e).filter(function(e){return r.key.test(e)}).length,i=new o(r.key);while(n<r.min||n<r.max&&Math.random()<.5){t=i.gen();if(t in e)continue;e[t]=r.value.generate(),n+=1}}if(this.other!==f)while(Math.random()<.5)t=String.schema.generate(),t in e||(e[t]=this.other.generate());return e},leafs:function(){var e=[],t=[];return this.properties.forEach(function(n){var r=n.value.leafs?n.value.leafs():{certain:[n.value],uncertain:[]};n.min>0?(e.push(r.certain),t.push(r.uncertain)):(t.push(r.uncertain),t.push(r.certain))}),{certain:l.union.apply(null,e),uncertain:l.union.apply(null,t.concat([this.other]))}},getId:function(){return this.id||(this.id=(new o(/^[a-zA-Z]{4,6}$/)).gen()),this.id},toJSON:function(){var e,t,n,r={type:"object"};for(e in this.stringProps)t=this.stringProps[e],r.properties=r.properties||{},r.properties[t.key]=t.value.toJSON(),t.min===1&&(r.properties[t.key].required=!0);for(e=0;e<this.regexpProps.length;e++)t=this.regexpProps[e],r.patternProperties=r.patternProperties||{},n=t.key.toString(),n=n.substr(2,n.length-4),r.patternProperties[n]=t.value.toJSON();return this.other!==a&&(r.additionalProperties=this.other===f?!1:this.other.toJSON()),this.id&&(r.id=this.id),r}};var h=function(){var e="[](){}^$?*+.".split("").map(function(e){return RegExp("(\\\\)*\\"+e,"g")}),t="bBwWdDsS".split("").map(function(e){return RegExp("(\\\\)*"+e,"g")});return function(n){var r,i,s;for(r=0;r<e.length;r++){s=n.match(e[r]);if(!s)continue;for(i=0;i<s.length;i++)if(s[i].length%2===1)return RegExp("^"+n+"$")}for(r=0;r<t.length;r++){s=n.match(t[r]);if(!s)continue;for(i=0;i<s.length;i++)if(s[i].length%2===0)return RegExp("^"+n+"$")}for(r=0;r<e.length;r++)n=n.replace(e[r],function(e){return e.substr(1)});return n}}();s.fromJS.def(function(e){if(e instanceof Object){var t,n,r,i,o=[],u;for(var a in e){i=s.fromJS(e[a]);if(a==="*"){u=i;continue}t=a[0],n=t==="*"||t==="?"?0:1,r=t==="*"||t==="+"?Infinity:1;if(t==="*"||t==="?"||t==="+")a=a.substr(1);a=h(a),o.push({min:n,max:r,key:a,value:i})}return new c(o,u)}return}),s.fromJSON.def(function(e){if(!e||e.type!=="object")return;var t,n=[];for(t in e.properties)n.push({min:e.properties[t].required?1:0,max:1,key:t,value:s.fromJSON(e.properties[t])});for(t in e.patternProperties)n.push({min:0,max:Infinity,key:RegExp("^"+t+"$"),value:s.fromJSON(e.properties[t])});var r;return e.additionalProperties!==undefined&&(r=e.additionalProperties===!1?f:s.fromJSON(e.additionalProperties)),new c(n,r)})}),e.define("/js-schema/node_modules/randexp/package.json",function(e,t,n,r,i){t.exports={main:"./lib/randexp.js"}}),e.define("/js-schema/node_modules/randexp/lib/randexp.js",function(e,t,n,r,i){var s=e("ret"),o=s.types,u=function(e,t){return e+Math.floor(Math.random()*(1+t-e))},a=function(e){return e+(97<=e&&e<=122?-32:65<=e&&e<=90?32:0)},f=function(e,t,n,r){return e<=n&&n<=t?{from:n,to:Math.min(t,r)}:e<=r&&r<=t?{from:Math.max(e,n),to:r}:!1},l=function(e,t){var n,r,i,s;if((r=e.length)!==t.length)return!1;for(n=0;n<r;n++){s=e[n];for(i in s)if(s.hasOwnProperty(i)&&s[i]!==t[n][i])return!1}return!0},c=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.not!==t.not&&l(i.set,t.set))return!0}return!1},h=function(e,t,n){var r,i,s=[],u=!1;for(var l=0,p=e.length;l<p;l++){r=e[l];switch(r.type){case o.CHAR:i=r.value;if(i===t||n&&a(i)===t)return!0;break;case o.RANGE:if(r.from<=t&&t<=r.to||n&&((i=f(97,122,r.from,r.to))!==!1&&i.from<=t&&t<=i.to||(i=f(65,90,r.from,r.to))!==!1&&i.from<=t&&t<=i.to))return!0;break;case o.SET:s.length>0&&c(s,r)?u=!0:s.push(r);if(!u&&!h(r.set,t,n)!=!r.not)return!0}}return!1},p=function(e,t){return String.fromCharCode(t&&Math.random()>.5?a(e):e)},d=function(e,t,n){switch(e.type){case o.ROOT:case o.GROUP:if(e.notFollowedBy)return"";if(e.remember)var r=t.push(!0)-1;var i=e.options?e.options[Math.floor(Math.random()*e.options.length)]:e.stack,s="";for(var a=0,f=i.length;a<f;a++)s+=d.call(this,i[a],t);return e.remember&&(t[r]=s),s;case o.POSITION:return"";case o.SET:var l=!n!=!e.not;if(!l)return d.call(this,e.set[Math.floor(Math.random()*e.set.length)],t,l);for(;;){var c=this.anyRandChar(),v=c.charCodeAt(0);if(h(e.set,v,this.ignoreCase))continue;return c};case o.RANGE:return p(u(e.from,e.to),this.ignoreCase);case o.REPETITION:var m=u(e.min,e.max===Infinity?e.min+this.max:e.max),s="";for(var a=0;a<m;a++)s+=d.call(this,e.value,t);return s;case o.REFERENCE:return t[e.value-1];case o.CHAR:return p(e.value,this.ignoreCase)}},v=t.exports=function(e,t){if(e instanceof RegExp)this.ignoreCase=e.ignoreCase,this.multiline=e.multiline,typeof e.max=="number"&&(this.max=e.max),typeof e.anyRandChar=="function"&&(this.anyRandChar=e.anyRandChar),e=e.source;else{if(typeof e!="string")throw new Error("Expected a regexp or string");this.ignoreCase=t&&t.indexOf("i")!==-1,this.multiline=t&&t.indexOf("m")!==-1}this.tokens=s(e)};v.prototype.max=100,v.prototype.anyRandChar=function(){return String.fromCharCode(u(0,65535))},v.prototype.gen=function(){return d.call(this,this.tokens,[])};var m=v.randexp=function(e,t){var n;return e._randexp===undefined?(n=new v(e,t),e._randexp=n):(n=e._randexp,typeof e.max=="number"&&(n.max=e.max),typeof e.anyRandChar=="function"&&(n.anyRandChar=e.anyRandChar)),n.gen()};v.sugar=function(){RegExp.prototype.gen=function(){return m(this)}}}),e.define("/js-schema/node_modules/randexp/node_modules/ret/package.json",function(e,t,n,r,i){t.exports={main:"./lib/index.js"}}),e.define("/js-schema/node_modules/randexp/node_modules/ret/lib/index.js",function(e,t,n,r,i){var s=e("./util"),o=e("./types"),u=e("./sets"),a=e("./positions");t.exports=function(e){var t=0,n,r,i={type:o.ROOT,stack:[]},f=i,l=i.stack,c=[],h=function(t){s.error(e,"Nothing to repeat at column "+(t-1))},p=s.strToChars(e);n=p.length;while(t<n){r=p[t++];switch(r){case"\\":r=p[t++];switch(r){case"b":l.push(a.wordBoundary());break;case"B":l.push(a.nonWordBoundary());break;case"w":l.push(u.words());break;case"W":l.push(u.notWords());break;case"d":l.push(u.ints());break;case"D":l.push(u.notInts());break;case"s":l.push(u.whitespace());break;case"S":l.push(u.notWhitespace());break;default:/\d/.test(r)?l.push({type:o.REFERENCE,value:parseInt(r)}):l.push({type:o.CHAR,value:r.charCodeAt(0)})}break;case"^":l.push(a.begin());break;case"$":l.push(a.end());break;case"[":if(p[t]==="^"){var d=!0;t++}else var d=!1;var v=s.tokenizeClass(p.slice(t),e);t+=v[1],l.push({type:o.SET,set:v[0],not:d});break;case".":l.push(u.anyChar());break;case"(":var m={type:o.GROUP,stack:[],remember:!0};r=p[t],r==="?"&&(r=p[t+1],t+=2,r==="="?m.followedBy=!0:r==="!"?m.notFollowedBy=!0:r!==":"&&s.error(e,"Invalid character '"+r+"' after '?' at column "+(t-1)),m.remember=!1),l.push(m),c.push(f),f=m,l=m.stack;break;case")":c.length===0&&s.error(e,"Unmatched ) at column "+(t-1)),f=c.pop(),l=f.options?f.options[f.options.length-1]:f.stack;break;case"|":f.options||(f.options=[f.stack],delete f.stack);var g=[];f.options.push(g),l=g;break;case"{":var y=/^(\d+)(,(\d+)?)?\}/.exec(p.slice(t)),b,w;y!==null?(b=parseInt(y[1]),w=y[2]?y[3]?parseInt(y[3]):Infinity:b,t+=y[0].length,l.push({type:o.REPETITION,min:b,max:w,value:l.pop()})):l.push({type:o.CHAR,value:123});break;case"?":l.length===0&&h(t),l.push({type:o.REPETITION,min:0,max:1,value:l.pop()});break;case"+":l.length===0&&h(t),l.push({type:o.REPETITION,min:1,max:Infinity,value:l.pop()});break;case"*":l.length===0&&h(t),l.push({type:o.REPETITION,min:0,max:Infinity,value:l.pop()});break;default:l.push({type:o.CHAR,value:r.charCodeAt(0)})}}return i},t.exports.types=o}),e.define("/js-schema/node_modules/randexp/node_modules/ret/lib/util.js",function(e,t,n,r,i){var s=e("./types"),o=e("./sets"),u="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",a={0:0,t:9,n:10,v:11,f:12,r:13},f=t.exports={strToChars:function(e){var t=/(\[\\b\])|\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z\[\\\]\^?])|([0tnvfr]))/g,e=e.replace(t,function(e,t,n,r,i,s,o){var f=t?8:n?parseInt(n,16):r?parseInt(r,16):i?parseInt(i,8):s?u.indexOf(s):o?a[o]:undefined,l=String.fromCharCode(f);return/[\[\]{}\^$.|?*+()]/.test(l)&&(l="\\"+l),l});return e},tokenizeClass:function(e,t){var n=[],r=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?(.)/g,i,u;while((i=r.exec(e))!=null)if(i[1])n.push(o.words());else if(i[2])n.push(o.ints());else if(i[3])n.push(o.whitespace());else if(i[4])n.push(o.notWords());else if(i[5])n.push(o.notInts());else if(i[6])n.push(o.notWhitespace());else if(i[7])n.push({type:s.RANGE,from:(i[8]||i[9]).charCodeAt(0),to:i[10].charCodeAt(0)});else{if(!(u=i[12]))return[n,r.lastIndex];n.push({type:s.CHAR,value:u.charCodeAt(0)})}f.error(t,"Missing ']'")},error:function(e,t){throw new Error("Invalid regular expression: /"+e+"/: "+t)}}}),e.define("/js-schema/node_modules/randexp/node_modules/ret/lib/types.js",function(e,t,n,r,i){t.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}}),e.define("/js-schema/node_modules/randexp/node_modules/ret/lib/sets.js",function(e,t,n,r,i){var s=e("./types"),o=function(){return[{type:s.RANGE,from:48,to:57}]},u=function(){return[{type:s.RANGE,from:97,to:122},{type:s.RANGE,from:65,to:90}].concat(o())},a=function(){return[{type:s.CHAR,value:12},{type:s.CHAR,value:10},{type:s.CHAR,value:13},{type:s.CHAR,value:9},{type:s.CHAR,value:11},{type:s.CHAR,value:160},{type:s.CHAR,value:5760},{type:s.CHAR,value:6158},{type:s.CHAR,value:8192},{type:s.CHAR,value:8193},{type:s.CHAR,value:8194},{type:s.CHAR,value:8195},{type:s.CHAR,value:8196},{type:s.CHAR,value:8197},{type:s.CHAR,value:8198},{type:s.CHAR,value:8199},{type:s.CHAR,value:8200},{type:s.CHAR,value:8201},{type:s.CHAR,value:8202},{type:s.CHAR,value:8232},{type:s.CHAR,value:8233},{type:s.CHAR,value:8239},{type:s.CHAR,value:8287},{type:s.CHAR,value:12288}]};n.words=function(){return{type:s.SET,set:u()}},n.notWords=function(){return{type:s.SET,set:u(),not:!0}},n.ints=function(){return{type:s.SET,set:o()}},n.notInts=function(){return{type:s.SET,set:o(),not:!0}},n.whitespace=function(){return{type:s.SET,set:a()}},n.notWhitespace=function(){return{type:s.SET,set:a(),not:!0}},n.anyChar=function(){return{type:s.SET,set:[{type:s.CHAR,value:10}],not:!0}}}),e.define("/js-schema/node_modules/randexp/node_modules/ret/lib/positions.js",function(e,t,n,r,i){var s=e("./types");n.wordBoundary=function(){return{type:s.POSITION,value:"b"}},n.nonWordBoundary=function(){return{type:s.POSITION,value:"B"}},n.begin=function(){return{type:s.POSITION,value:"^"}},n.end=function(){return{type:s.POSITION,value:"$"}}}),e.define("/js-schema/lib/utils.js",function(e,t,n,r,i){t.exports={referenceHandler:function(e){return function(t){var n=e.indexOf(t);return"{"+(n===-1?e.push(t)-1:n)+"}"}}}}),e.define("/js-schema/node_modules/underscore/package.json",function(e,t,n,r,i){t.exports={main:"underscore.js"}}),e.define("/js-schema/node_modules/underscore/underscore.js",function(e,t,n,r,i){(function(){function L(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&T.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&T.isFunction(t.isEqual))return t.isEqual(e);var r=l.call(e);if(r!=l.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&L(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(T.has(e,u)){s++;if(!(o=T.has(t,u)&&L(e[u],t[u],n)))break}if(o){for(u in t)if(T.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,r=e._,i={},s=Array.prototype,o=Object.prototype,u=Function.prototype,a=s.slice,f=s.unshift,l=o.toString,c=o.hasOwnProperty,h=s.forEach,p=s.map,d=s.reduce,v=s.reduceRight,m=s.filter,g=s.every,y=s.some,b=s.indexOf,w=s.lastIndexOf,E=Array.isArray,S=Object.keys,x=u.bind,T=function(e){return new B(e)};typeof n!="undefined"?(typeof t!="undefined"&&t.exports&&(n=t.exports=T),n._=T):e._=T,T.VERSION="1.3.3";var N=T.each=T.forEach=function(e,t,n){if(e==null)return;if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,s=e.length;r<s;r++)if(r in e&&t.call(n,e[r],r,e)===i)return}else for(var o in e)if(T.has(e,o)&&t.call(n,e[o],o,e)===i)return};T.map=T.collect=function(e,t,n){var r=[];return e==null?r:p&&e.map===p?e.map(t,n):(N(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);N(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduceRight===v)return r&&(t=T.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=T.toArray(e).reverse();return r&&!i&&(t=T.bind(t,r)),i?T.reduce(s,t,n,r):T.reduce(s,t)},T.find=T.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},T.filter=T.select=function(e,t,n){var r=[];return e==null?r:m&&e.filter===m?e.filter(t,n):(N(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){var r=[];return e==null?r:(N(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},T.every=T.all=function(e,t,n){var r=!0;return e==null?r:g&&e.every===g?e.every(t,n):(N(e,function(e,s,o){if(!(r=r&&t.call(n,e,s,o)))return i}),!!r)};var C=T.some=T.any=function(e,t,n){t||(t=T.identity);var r=!1;return e==null?r:y&&e.some===y?e.some(t,n):(N(e,function(e,s,o){if(r||(r=t.call(n,e,s,o)))return i}),!!r)};T.include=T.contains=function(e,t){var n=!1;return e==null?n:b&&e.indexOf===b?e.indexOf(t)!=-1:(n=C(e,function(e){return e===t}),n)},T.invoke=function(e,t){var n=a.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t||e:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-Infinity;var r={computed:-Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return Infinity;var r={computed:Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},T.shuffle=function(e){var t=[],n;return N(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},T.sortBy=function(e,t,n){var r=T.isFunction(t)?t:function(e){return e[t]};return T.pluck(T.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},T.groupBy=function(e,t){var n={},r=T.isFunction(t)?t:function(e){return e[t]};return N(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},T.sortedIndex=function(e,t,n){n||(n=T.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},T.toArray=function(e){return e?T.isArray(e)?a.call(e):T.isArguments(e)?a.call(e):e.toArray&&T.isFunction(e.toArray)?e.toArray():T.values(e):[]},T.size=function(e){return T.isArray(e)?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return t!=null&&!n?a.call(e,0,t):e[0]},T.initial=function(e,t,n){return a.call(e,0,e.length-(t==null||n?1:t))},T.last=function(e,t,n){return t!=null&&!n?a.call(e,Math.max(e.length-t,0)):e[e.length-1]},T.rest=T.tail=function(e,t,n){return a.call(e,t==null||n?1:t)},T.compact=function(e){return T.filter(e,function(e){return!!e})},T.flatten=function(e,t){return T.reduce(e,function(e,n){return T.isArray(n)?e.concat(t?n:T.flatten(n)):(e[e.length]=n,e)},[])},T.without=function(e){return T.difference(e,a.call(arguments,1))},T.uniq=T.unique=function(e,t,n){var r=n?T.map(e,n):e,i=[];return e.length<3&&(t=!0),T.reduce(r,function(n,r,s){if(t?T.last(n)!==r||!n.length:!T.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=T.intersect=function(e){var t=a.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=T.flatten(a.call(arguments,1),!0);return T.filter(e,function(e){return!T.include(t,e)})},T.zip=function(){var e=a.call(arguments),t=T.max(T.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=T.pluck(e,""+r);return n},T.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=T.sortedIndex(e,t),e[r]===t?r:-1;if(b&&e.indexOf===b)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},T.lastIndexOf=function(e,t){if(e==null)return-1;if(w&&e.lastIndexOf===w)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var k=function(){};T.bind=function(t,n){var r,i;if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return i=a.call(arguments,2),r=function(){if(this instanceof r){k.prototype=t.prototype;var e=new k,s=t.apply(e,i.concat(a.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(a.call(arguments)))}},T.bindAll=function(e){var t=a.call(arguments,1);return t.length==0&&(t=T.functions(e)),N(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(a.call(arguments,1)))},T.throttle=function(e,t){var n,r,i,s,o,u,a=T.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},T.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},T.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},T.wrap=function(e,t){return function(){var n=[e].concat(a.call(arguments,0));return t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},T.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){return T.map(e,T.identity)},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return N(a.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={};return N(T.flatten(a.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},T.defaults=function(e){return N(a.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e},T.isEqual=function(e,t){return L(e,t,[])},T.isEmpty=function(e){if(e==null)return!0;if(T.isArray(e)||T.isString(e))return e.length===0;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!!e&&e.nodeType==1},T.isArray=E||function(e){return l.call(e)=="[object Array]"},T.isObject=function(e){return e===Object(e)},T.isArguments=function(e){return l.call(e)=="[object Arguments]"},T.isArguments(arguments)||(T.isArguments=function(e){return!!e&&!!T.has(e,"callee")}),T.isFunction=function(e){return l.call(e)=="[object Function]"},T.isString=function(e){return l.call(e)=="[object String]"},T.isNumber=function(e){return l.call(e)=="[object Number]"},T.isFinite=function(e){return T.isNumber(e)&&isFinite(e)},T.isNaN=function(e){return e!==e},T.isBoolean=function(e){return e===!0||e===!1||l.call(e)=="[object Boolean]"},T.isDate=function(e){return l.call(e)=="[object Date]"},T.isRegExp=function(e){return l.call(e)=="[object RegExp]"},T.isNull=function(e){return e===null},T.isUndefined=function(e){return e===void 0},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=r,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},T.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},T.result=function(e,t){if(e==null)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){N(T.functions(e),function(t){F(t,T[t]=e[t])})};var A=0;T.uniqueId=function(e){var t=A++;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/.^/,M={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var _ in M)M[M[_]]=_;var D=/\\|'|\r|\n|\t|\u2028|\u2029/g,P=/\\(\\|'|r|n|t|u2028|u2029)/g,H=function(e){return e.replace(P,function(e,t){return M[t]})};T.template=function(e,t,n){n=T.defaults(n||{},T.templateSettings);var r="__p+='"+e.replace(D,function(e){return"\\"+M[e]}).replace(n.escape||O,function(e,t){return"'+\n_.escape("+H(t)+")+\n'"}).replace(n.interpolate||O,function(e,t){return"'+\n("+H(t)+")+\n'"}).replace(n.evaluate||O,function(e,t){return"';\n"+H(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,T);var s=function(e){return i.call(this,e,T)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},T.chain=function(e){return T(e).chain()};var B=function(e){this._wrapped=e};T.prototype=B.prototype;var j=function(e,t){return t?T(e).chain():e},F=function(e,t){B.prototype[e]=function(){var e=a.call(arguments);return f.call(e,this._wrapped),j(t.apply(T,e),this._chain)}};T.mixin(T),N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];B.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],j(n,this._chain)}}),N(["concat","join","slice"],function(e){var t=s[e];B.prototype[e]=function(){return j(t.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}).call(this)}),e.define("/js-schema/lib/patterns/or.js",function(e,t,n,r,i){var s=e("../schema"),o=e("../patterns/equality"),u=e("underscore"),a=e("randexp"),f=t.exports=function(e){return this.schemas=e,new s(this)};f.prototype={compile:function(){var e={references:this.schemas.slice()},t=this.schemas.map(function(e,t){return"{"+t+"}(instance)"});return e.expression=t.join(" || "),e},generate:function(){return this.schemas[Math.floor(Math.random()*this.schemas.length)].generate()},leafs:function(){var e=this.schemas.map(function(e){return e.leafs?e.leafs():{certain:[e],uncertain:[]}});e.certain=e.map(function(e){return e.certain}),e.uncertain=e.map(function(e){return e.uncertain});var t=u.union.apply(null,e.certain.concat(e.uncertain)),n=u.intersection.apply(null,e.certain),r=u.difference(t,n);return{certain:n,uncertain:r}},getId:function(){return this.id||(this.id=(new a(/^[a-zA-Z]{4,6}$/)).gen()),this.id},toJSON:function(){var e=this.schemas.map(s.toJSON),t=!0;for(var n=0;n<e.length;n++)if(!(e[n]["enum"]instanceof Array&&e[n]["enum"].length===1)){t=!1;break}if(t)return{"enum":e.map(function(e){return e["enum"][0]})};var r={type:e.map(function(e){var t=typeof e.type=="string"&&Object.keys(e).length===1;return t?e.type:e})};return this.id&&(s.id=this.id),r}},s.fromJS.def(function(e){if(e instanceof Array)return new f(e.map(function(e){return e===undefined?s.self:s.fromJS(e)}))}),s.fromJSON.def(function(e){if(!e)return;if(e["enum"]instanceof Array)return new f(e["enum"].map(function(e){return new o(e)}));if(e.type instanceof Array)return new f(e.type.map(function(e){return s.fromJSON(typeof e=="string"?{type:e}:e)}))})}),e.define("/js-schema/lib/patterns/equality.js",function(e,t,n,r,i){var s=e("../schema"),o=function(e,t){if(Object(e)!==e||Object(t)!==t)return e===t;if(e instanceof Array&&!(t instanceof Array)||!(e instanceof Array)&&t instanceof Array)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!o(e[n],t[n]))return!1;return!0},u=t.exports=function(e){return this.object=e,new s(this)};u.prototype={validate:function(e){return o(e,this.object)},toJSON:function(){return{"enum":[this.object]}}},s.fromJS.def(function(e){if(e instanceof Array&&e.length===1)return new u(e[0])})}),e.define("/js-schema/lib/patterns/regexp.js",function(e,t,n,r,i){var s=e("../schema"),o=e("randexp"),u=new o(/^[a-zA-Z0-9]{1,10}$/),a=t.exports=function(e){return this.regexp=e,this.randexp=this.regexp?new o(this.regexp):u,new s(this)};a.prototype={compile:function(){return{references:[this.regexp],expression:"Object(instance) instanceof String"+(this.regexp?" && {0}.test(instance)":"")}},generate:function(){return this.randexp.gen()},toJSON:function(){var e={type:"string"};return this.regexp&&(console.log(this.regexp.toString()),e.pattern=this.regexp.toString(),e.pattern=e.pattern.substr(1,e.pattern.length-2)),e}},s.fromJSON.def(function(e){if(!e||e.type!=="string")return;return"pattern"in e?new a(RegExp("^"+e.pattern+"$")):"minLength"in e||"maxLength"in e?new a(RegExp("^.{"+(e.minLength||0)+","+(e.maxLength||"")+"}$")):new a}),s.fromJS.def(function(e){if(e instanceof RegExp)return new a(e)})}),e.define("/js-schema/lib/patterns/class.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=function(e){return this.constructor=e,new s(this)};o.prototype={compile:function(){return{references:[this.constructor],expression:"instance instanceof {0}"}},generate:function(){var e=function(){};return e.prototype=this.constructor.prototype,new e}},s.fromJS.def(function(e){if(e instanceof Function)return e.schema instanceof Function?e.schema:new o(e);return})}),e.define("/js-schema/lib/extensions/Boolean.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=new s({compile:function(){return{expression:"Object(instance) instanceof Boolean"}},generate:function(){return Math.random()<.5},toJSON:function(){return{type:"boolean"}}});s.fromJSON.def(function(e){if(!e||e.type!=="boolean")return;return o}),Boolean.schema=o}),e.define("/js-schema/lib/extensions/Number.js",function(e,t,n,r,i){var s=e("../schema"),o=t.exports=function(e,t,n,r,i){return this.minimum=e!=null?e:-Infinity,this.exclusiveMinimum=t,this.maximum=e!=null?n:Infinity,this.exclusiveMaximum=r,this.divisibleBy=i||0,new s(this)};o.prototype={min:function(e){return new o(e,!1,this.maximum,this.exclusiveMaximum,this.divisibleBy)},above:function(e){return new o(e,!0,this.maximum,this.exclusiveMaximum,this.divisibleBy)},max:function(e){return new o(this.minimum,this.exclusiveMinimum,e,!1,this.divisibleBy)},below:function(e){return new o(this.minimum,this.exclusiveMinimum,e,!0,this.divisibleBy)},step:function(e){return new o(this.minimum,this.exclusiveMinimum,this.maximum,this.exclusiveMaximum,e)},compile:function(){var e=[this.minimum,this.maximum,this.divisibleBy],t=["Object(instance) instanceof Number"];return this.minimum!==-Infinity&&t.push("instance "+(this.exclusiveMinimum?">":">=")+" {0}"),this.maximum!==Infinity&&t.push("instance "+(this.exclusiveMaximum?"<":"<=")+" {1}"),this.divisibleBy!==0&&t.push("instance % {2} === 0"),{references:e,expression:t.join(" && ")}},generate:function(){var e,t,n=this.minimum,r=this.maximum,i=this.divisibleBy;if(n===-Infinity||r===Infinity){e=10;while(Math.random()<.5)e*=10;n===-Infinity&&r===Infinity?(n=e/-2,r=e/2):n===-Infinity?n=r-e:r===Infinity&&(r=n+e)}if(i===0){e=r-n;do t=n+Math.random()*e;while(this.exclusiveMinimum&&t===n||this.exclusiveMaximum&&t===r)}else{n=Math.ceil(n/i)*i,r=Math.floor(r/i)*i,this.exclusiveMinimum&&n===this.minimum&&(n+=i),this.exclusiveMaximum&&r===this.maximum&&(r-=i);if(n>r)return undefined;e=Math.round((r-n)/i)+1,t=n+i*Math.floor(Math.random()*e)}return t},toJSON:function(){var e=this.divisibleBy,t=e!==0&&e===Math.floor(e),n={type:t?"integer":"number"};return e!==0&&e!==1&&(n.divisibleBy=e),this.minimum!==-Infinity&&(n.minimum=this.minimum,this.exclusiveMinimum===!0&&(n.exclusiveMinimum=!0)),this.maximum!==Infinity&&(n.maximum=this.maximum,this.exclusiveMaximum===!0&&(n.exclusiveMaximum=!0)),n}},s.fromJSON.def(function(e){if(!e||e.type!=="number"&&e.type!=="integer")return;return new 
o(e.minimum,e.exclusiveMinimum,e.maximum,e.exclusiveMaximum,e.divisibleBy||(e.type==="integer"?1:0))}),Number.schema=new o,Number.min=Number.schema.min,Number.above=Number.schema.above,Number.max=Number.schema.max,Number.below=Number.schema.below,Number.step=Number.schema.step,Number.Integer=Number.step(1)}),e.define("/js-schema/lib/extensions/String.js",function(e,t,n,r,i){var s=e("../patterns/regexp");String.of=function(){var e=Array.prototype.reverse.call(arguments),t=e[0]?"["+e[0]+"]":"[a-zA-Z0-9]",n=e[1],r=e.length>2?e[2]:e[1],i="^"+t+"{"+(r||0)+","+(n||"")+"}$";return new s(RegExp(i))},String.schema=new s}),e.define("/js-schema/lib/extensions/Object.js",function(e,t,n,r,i){var s=e("../patterns/reference"),o=e("../patterns/equality"),u=e("../patterns/object");Object.like=function(e){return new o(e)},Object.reference=function(e){return new s(e)},Object.schema=new u}),e.define("/js-schema/lib/extensions/Array.js",function(e,t,n,r,i){var s=e("../schema"),o=e("../patterns/equality"),u=e("../patterns/anything"),a=e("underscore"),f=e("randexp"),l=t.exports=function(e,t,n){return this.itemSchema=e||u,this.min=n||0,this.max=t||Infinity,new s(this)};l.prototype={compile:function(){var e={};e.fn="if (!(instance instanceof Array)) return false;";if(this.min>0||this.max<Infinity){var t=[];this.min===this.max?t.push("instance.length !== "+this.min):(this.min>0&&t.push("instance.length < "+this.min),this.max<Infinity&&t.push("instance.length > "+this.max)),e.fn+="if ("+t.join(" || ")+") return false;"}return this.itemSchema!==u&&(e.references=[this.itemSchema],e.fn+="for (var i = 0; i < instance.length; i++) {  if (!{0}(instance[i])) return false;}"),e.fn+="return true;",e},generate:function(){var e=[];while(e.length<this.min||e.length<this.max&&Math.random()<.666)e.push(this.itemSchema.generate());return e},leafs:function(){var e=this.itemSchema.leafs?this.itemSchema.leafs():{certain:[this.itemSchema],uncertain:[]};return this.min>0?e:{certain:[],uncertain:a.union(e.certain,e.uncertain)}},getId:function(){return this.id||(this.id=(new f(/^[a-zA-Z]{4,6}$/)).gen()),this.id},toJSON:function(){var e={type:"array"};return this.min>0&&(e.minItems=this.min),this.max<Infinity&&(e.maxItems=this.max),this.itemSchema!==u&&(e.items=this.itemSchema.toJSON()),this.id&&(e.id=this.id),e}},s.fromJSON.def(function(e){if(!e||e.type!=="array")return;if(e.items instanceof Array)return;return new l(s.fromJSON(e.items),e.maxItems,e.minItems)}),Array.of=function(){var e=Array.prototype.reverse.call(arguments);return e.length===2&&(e[2]=e[1]),new l(s.fromJS(e[0]),e[1],e[2])},Array.like=function(e){return new o(e)},Array.schema=new l}),e.define("/js-schema/lib/extensions/Function.js",function(e,t,n,r,i){var s=e("../patterns/reference"),o=e("../patterns/class");Function.schema=new o(Function),Function.schema.generate=function(){return function(){}},Function.reference=function(e){return new s(e)}}),e.define("/js-schema/index.js",function(e,t,n,r,i){t.exports=e("./lib/schema"),e("./lib/patterns/reference"),e("./lib/patterns/nothing"),e("./lib/patterns/anything"),e("./lib/patterns/object"),e("./lib/patterns/or"),e("./lib/patterns/equality"),e("./lib/patterns/regexp"),e("./lib/patterns/class"),e("./lib/extensions/Boolean"),e("./lib/extensions/Number"),e("./lib/extensions/String"),e("./lib/extensions/Object"),e("./lib/extensions/Array"),e("./lib/extensions/Function")}),window.schema=e("/js-schema/index.js")})();